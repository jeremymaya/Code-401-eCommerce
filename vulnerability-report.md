# Code Fellows ASP.NET 401 eCommerce Website Project - Vunerability Report

## TINY PLANTS Vunerability Report

*Authors: Karina Chen and Kyungrae Kim*

---

## Vulnerability 1
### Exposure
Empty String Password is makes an account insecure by using an empty string as a password while the users are normally public. 

Empty String Password would have weaken authentication against a brute-force attack on our site and potentially allow access to accounts or some unauthorized part of the site.

### Repair
Regisger.cshtml.cs and Login.cshtml.cs contain the vulnerability. We were able to address the vunerability by using ASP.NET Core Identity as it providea the following safeguard:
* "By default, Identity requires that passwords contain an uppercase character, lowercase character, a digit, and a non-alphanumeric character. Passwords must be at least six characters long."

Identity was enabled by calling `UseAuthentication` from Startup.cs:
```C#
public void Configure(IApplicationBuilder app, IWebHostEnvironment env, IServiceProvider serviceProvider)
{
    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }

    app.UseStaticFiles();

    app.UseRouting();

    app.UseAuthentication();

    app.UseAuthorization();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapRazorPages();
        endpoints.MapDefaultControllerRoute();
    });

    RoleInitializer.SeedData(serviceProvider);
}
```

`ApplicationUser` was extended from `IdentyUser`:
```C#
public class ApplicationUser : IdentityUser
{
    [Display(Name = "First Name")]
    public string FirstName { get; set; }
    [Display(Name = "Last Name")]
    public string LastName { get; set; }

    public string Address { get; set; }

    [Display(Name = "Address 2")]
    public string Address2 { get; set; }

    public string City { get; set; }

    public string State { get; set; }

    public string Zip { get; set; }
}
```

---

## Resources
[OWASP - Empty String Password](https://www.owasp.org/index.php/Empty_String_Password)
[Microsoft - Configure ASP.NET Core Identity](https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity-configuration?view=aspnetcore-3.1)

---

## Vulnerability 2
### Exposure
Password Management: Hardcoded Password is hard coding a password into the project. 

Password Management: Hardcoded Password can reveals sensitive password to developers and the password cannot be changed without patching the software when there is an issue. The stakeholders of the system will be forced to choose between security and availability if the account protected by the password is compromised.

### Repair
Startup.cs containa the vulnerability. We were able to address the vunerability by using Configuration in ASP.NET Core as it provides the following safeguard:
* "Configuration providers read configuration data into key-value pairs from a variety of configuration sources"

`IConfiguration` was injected into the Startup.cs:
```C#
public IConfiguration Configuration { get; }
public IHostEnvironment Environment { get; }

public Startup(IHostEnvironment environment)
{
    Environment = environment;
    var builder = new ConfigurationBuilder().AddEnvironmentVariables();
    builder.AddUserSecrets<Startup>();
    Configuration = builder.Build();
}
```

---

### Resources
[OWASP - Password Management: Hardcoded Password](https://www.owasp.org/index.php/Information_exposure_through_query_strings_in_url)
[Microsoft - Configure ASP.NET Core Identity](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-3.1)

---